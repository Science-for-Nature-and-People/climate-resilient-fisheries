---
title: "Resilience Attribute Grids"
author: "Meghan Fletcher"
date: "2/15/2022"
output: 
  html_document:
    theme: flatly
    code_folding: hide
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)

library(tidyverse)
library(janitor)
library(here)
library(googlesheets4)
library(kableExtra)
```


# Read in the data

```{r}
aguion_barnacle <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1WfGsKOT0gFSN1yHUObDNSQflqd5avodSuf3kOZLTyLk/edit#gid=1947230832", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
#Rename
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
# Simplify
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
# Remove spacer rows
  filter(!is.na(attribute)) %>% 
# Format scores
  mutate(score=as.numeric(score)) %>% 
# Format dimension
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
# Format data quality
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data", ### CF used "E - No data/information; no basis for expert judgement", but JE's was different
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  # Format importance
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  # Format attribute
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  # Arrange
  arrange(dimension, domain, score) %>% 
  # Set attribute order
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))


#######################################################################################################################
burden_sardine <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1TkB-P94xgRssmcbAuzwoh0BlDdvUfYHO7vWjK6r2pxs/edit#gid=1274102518", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
#  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
#         quality=recode_factor(quality,
#                               "E - No data"="No data",
#                               "D - not confident that the answer provided reflects the true state of the system"="Low",
#                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
#                               "B - limited data/information and expert judgement"="Good",
#                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
#  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == NA ~ "0_NA"))


#######################################################################################################################
dickey_collas_eur <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1hfXTM5hwe0iLWQQmrc31-xruOV3SUixuxqRSuqC8ydA/edit#gid=1707192308", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))


#######################################################################################################################
eurich_clam <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1ZEIev1lcoD6Lxu3otzDCfbJJSiPJoZeyYbTvBXb_S9U/edit#gid=1453404713", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))


#####################################################################################################################################
free_crab <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/12zMb5el0QAB-CdZdmdKjWw5Krbwx7farqlUvbN08HEg/edit#gid=390317686", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data/information; no basis for expert judgement"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))



#######################################################################################################################
friedman_fiji <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/13fgkP1xHZB6gZqXUBHuylaC3ImCDIDTFFjqQ8RAoV-s/edit#gid=476628697", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
 # mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))



#######################################################################################################################
golden_madagascar <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1w99nN8C_Vd82j4Y23g2ZG_kuEh_Jc2HkW6lnLkhzeCU/edit#gid=1980661832", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
#  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
 # Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))



#######################################################################################################################
hollowed_bering_sea <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1YOYZ9T7RR_8OkqQIWeZobhS-3yaEbKmuAVz16Nrrz9g/edit#gid=1980661832", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  #mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))



########################################################################################################################
kisara_squid <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1RX1iUmEKsOUmuPZkn4SMA6zts9TTPz-gi0D6XFrY1RQ/edit#gid=934077877", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
 # mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))


###########################################################################################################################
kleisner_jfi <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1YM1wc6F0SgGIoBcTvSjVyLJquE6-6Chk1dPFoLiXuQY/edit#gid=1865610127", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))


################################################################################################################################
lau_png <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/18po7Pgq5Od6Q8yCnFdSfj_Gaxii34e-WsYwBFA3RTvo/edit#gid=1980661832", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))


###############################################################################################################################
mason_iceland <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1ZPs5ow4wpZgj5eP26jvoMRgD9q6VT9DEdkJfqj7UrRE/edit#gid=2142384281", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute) )%>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))


##########################################################################################################################
mills_lobster <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1HEPT54TsR1aTNNzDtZI59zU0eb-eJfH61ujErxAFtiI/edit#gid=553950990", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA")) 


########################################################################################################################
pecl_lobster <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/11Z-SLlAS0f9Ug1Z8gLMnHkaN7hoZT1W0KMVLG8HtbXs/edit#gid=179679195", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data",
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))


###########################################################################################################################
#schmidt_senegal <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1bUY6yII5y0FZfDRJ5lxpA7iD2p3o__2A1xsWivxwKB0/edit#gid=2000123802", 
#                           sheet = "UPDATED_S4_ResilienceAttributes",
#                           range = "A6:P61",
#                           col_names = TRUE,
#                           na = "",
#                           guess_max = 10000,
#                           trim_ws = TRUE,
#                           col_types = "c"
#                           ) %>%
#  as_tibble() %>%
#  clean_names() %>% 
#  rename(dimension=dimensions, 
#         domain=new_domain, 
#         attribute=resilience_attribute, 
#         score=score_1_4,
#         quality=information_quality, 
#         importance=importance_of_attribute_in_study_system_high_medium_low, 
#         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
#  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
#  filter(!is.na(attribute)) %>% 
#  mutate(score=as.numeric(score)) %>% 
#  mutate(dimension=recode_factor(dimension, 
#                                 "Ecological"="Ecological",
#                                 "Socio-economic"="Social-economic",
#                                 "Governance-management"="Goverance")) %>% 
#  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
#         quality=recode_factor(quality,
#                               "E - No data"="No data", 
#                               "D - not confident that the answer provided reflects the true state of the system"="Low",
#                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
#                               "B - limited data/information and expert judgement"="Good",
#                               "A - adequate and reliable data/information"="Excellent")) %>% 
#  mutate(importance=stringr::str_to_sentence(importance),
#         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
#  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
#  arrange(dimension, domain, score) %>% 
#  mutate(attribute=factor(attribute, levels=attribute))%>% 
# Create a new column to house numeric values for importance
#  mutate(numeric_importance = case_when(
#    importance == "Low" ~ 1,
#    importance == "Medium" ~ 2,
#    importance == "High" ~ 3)) %>% 
 # mutate(new_importance = case_when(
  #  numeric_importance == 1 ~ "1_Low",
   # numeric_importance == 2 ~ "2_Medium",
  #  numeric_importance == 3 ~ "3_High"
#  )) %>% 
#  # Create a new column to convert numeric scores into values
#  mutate(score_value = case_when(
#    score == 1 ~ "1_Low",
#    score == 2 ~ "2_Medium",
#    score == 3 ~ "2_Medium",
#    score == 4 ~ "3_High",
#    score == "NA" ~ "0_NA"))



###############################################################################################################################
tokunaga_lobster <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1jgFZut693B14rdKbxprKtQcoh-mFlMzAktekjhvwf2Q/edit#gid=228934601", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data", 
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))


############################################################################################################################
westfall_hms <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1DMx0Ux9Li1LhIe4ee5bbAYtJaw1vCezziRGyeERBthY/edit#gid=1818956842", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data", 
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute)) %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))


###################################################################################################################################
zhao_moorea <- read_sheet(ss = "https://docs.google.com/spreadsheets/d/1-Muz76--fNv1qfdXZcBENP-agemTTySZAay9uAEO0HI/edit#gid=1980661832", 
                           sheet = "UPDATED_S4_ResilienceAttributes",
                           range = "A6:P61",
                           col_names = TRUE,
                           na = "",
                           guess_max = 10000,
                           trim_ws = TRUE,
                           col_types = "c"
                           ) %>%
  as_tibble() %>%
  clean_names() %>% 
  rename(dimension=dimensions, 
         domain=new_domain, 
         attribute=resilience_attribute, 
         score=score_1_4,
         quality=information_quality, 
         importance=importance_of_attribute_in_study_system_high_medium_low, 
         work_as_described=does_the_mechanism_work_as_described_in_this_fishery_system) %>% 
  select(dimension, domain, attribute, score, quality, importance, work_as_described) %>% 
  filter(!is.na(attribute)) %>% 
  mutate(score=as.numeric(score)) %>% 
  mutate(dimension=recode_factor(dimension, 
                                 "Ecological"="Ecological",
                                 "Socio-economic"="Social-economic",
                                 "Governance-management"="Goverance")) %>% 
  mutate(quality=ifelse(quality=="NA - Not relevant in this system", NA, quality),
         quality=recode_factor(quality,
                               "E - No data"="No data", 
                               "D - not confident that the answer provided reflects the true state of the system"="Low",
                               "C - fairly confident that the answer provided reflects the true state of the system"="Fair",
                               "B - limited data/information and expert judgement"="Good",
                               "A - adequate and reliable data/information"="Excellent")) %>% 
  mutate(importance=stringr::str_to_sentence(importance),
         importance=factor(importance, levels=c("Low", "Medium", "High"))) %>% 
  mutate(attribute=ifelse(work_as_described=="no", paste0(attribute, "*"), attribute)) %>% 
  arrange(dimension, domain, score) %>% 
  mutate(attribute=factor(attribute, levels=attribute))  %>% 
# Create a new column to house numeric values for importance
  mutate(numeric_importance = case_when(
    importance == "Low" ~ 1,
    importance == "Medium" ~ 2,
    importance == "High" ~ 3)) %>% 
  mutate(Importance = case_when(
    numeric_importance == 1 ~ "1_Low",
    numeric_importance == 2 ~ "2_Medium",
    numeric_importance == 3 ~ "3_High",
    numeric_importance == "NA" ~ "0_NA"
  )) %>% 
  # Create a new column to convert numeric scores into values
  mutate(score_value = case_when(
    score == 1 ~ "1_Low",
    score == 2 ~ "2/3_Medium",
    score == 3 ~ "2/3_Medium",
    score == 4 ~ "4_High",
    score == "NA" ~ "0_NA"))
  
```

# Create a matrix for each case study

The following tables represent how attribute score and importance are related to one another across each individual case study. Scores were converted as follows: 1 - Low, 2 & 3 - Medium, 4 - High. This allows for matching to importance levels. The columns refer to attribute score and the rows refer to importance.

Additionally, attributes with an "*" next to them indicate that the user responded "to the column "work"no" to the column called _does_the_mechanism_work_as_described_in_this_fishery_system_


## Aguion Attribute Table

```{r}
aguion_table <- aguion_barnacle %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
aguion_table %>% 
  kbl(caption = "Aguion Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 3)) %>% save_kable("aguion_attribute_table.png")
```


## Burden Attribute Table

```{r}
### Go up to code above and fix once columns have been completed

burden_table <- burden_sardine %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance)
  

# Create table
burden_table %>% 
  kbl(caption = "Burden Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 4)) %>% save_kable("burden_attribute_table.png")
```


## Dickey-Collas Attribute Table

```{r}
dickey_collas_table <- dickey_collas_eur %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
dickey_collas_table %>% 
  kbl(caption = "Dickey-Collas Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 3)) %>% save_kable("dickey_collas_attribute_table.png")
```


## Eurich Attribute Table

```{r}
eurich_table <- eurich_clam %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
eurich_table %>% 
  kbl(caption = "Eurich Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 3)) %>% save_kable("eurich_attribute_table.png")
```


## Free Attribute Table

```{r}
free_table <- free_crab %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
free_table %>% 
  kbl(caption = "Free Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 3)) %>% save_kable("free_attribute_table.png")
```


## Friedman Attribute Table

```{r}
friedman_table <- friedman_fiji %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
friedman_table %>% 
  kbl(caption = "Friedman Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 3)) %>% save_kable("friedman_attribute_table.png")
```


## Golden Attribute Table

```{r}
golden_table <- golden_madagascar %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
golden_table %>% 
  kbl(caption = "Golden Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 4)) %>% save_kable("golden_attribute_table.png")
```


## Hollowed Attribute Table

```{r}
hollowed_table <- hollowed_bering_sea %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance)
  

# Create table
hollowed_table %>% 
  kbl(caption = "Hollowed Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 3)) %>% save_kable("hollowed_attribute_table.png")
```


## Kisara Attribute Table

```{r}
kisara_table <- kisara_squid %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
kisara_table %>% 
  kbl(caption = "Kisara Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 4)) %>% save_kable("kisara_attribute_table.png")
```


## Kleisner Attribute Table

```{r}
kleisner_table <- kleisner_jfi %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
kleisner_table %>% 
  kbl(caption = "Kleisner Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 2)) %>% save_kable("kleisner_attribute_table.png")
```


## Lau Attribute Table

```{r}
lau_table <- lau_png %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
lau_table %>% 
  kbl(caption = "Lau Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 4)) %>% save_kable("lau_attribute_table.png")
```


## Mason Attribute Table

```{r}
mason_table <- mason_iceland %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
mason_table %>% 
  kbl(caption = "Mason Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 2)) %>% save_kable("mason_attribute_table.png")
```


## Mills Attribute Table

```{r}
mills_table <- mills_lobster %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

mills_table %>% 
  kbl(caption = "Mills Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 2)) %>% save_kable("mills_attribute_table.png")
```


## Pecl Attribute Table

```{r}
pecl_table <- pecl_lobster %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
pecl_table %>% 
  kbl(caption = "Pecl Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Score" = 2)) %>% save_kable("pecl_attribute_table.png")
```


## Tokunaga Attribute Table

```{r}
tokunaga_table <- tokunaga_lobster %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
tokunaga_table %>% 
  kbl(caption = "Tokunaga Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 4)) %>% save_kable("tokunaga_attribute_table.png")
```


## Westfall Attribute Table

```{r}
westfall_table <- westfall_hms %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
westfall_table %>% 
  kbl(caption = "Westfall Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 2)) %>% save_kable("westfall_attribute_table.png")
```


## Zhao Attribute Table

```{r}
zhao_table <- zhao_moorea %>% 
  select("Importance", "score_value", "attribute") %>% 
  group_by(score_value, Importance) %>% 
  summarize(attribute = str_c(attribute)) %>% 
  pivot_wider(names_from = c(score_value), values_from = attribute, values_fn = list) %>% 
  arrange(Importance) 
  

# Create table
zhao_table %>% 
  kbl(caption = "Zhao Attribtue Table") %>% 
   kable_classic_2(full_width = F, html_font = "Cambria") %>% 
  kable_styling(bootstrap_options = c("striped", "hover")) %>% 
  add_header_above(c(" ", "Attribute Scores" = 3)) %>% save_kable("zhao_attribute_table.png")
```





